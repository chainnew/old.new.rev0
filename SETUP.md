# Ruixen AI Chat - Setup Guide

## OpenRouter API Configuration

This project uses **3 OpenRouter API keys** to interact with **x-ai/grok-code-fast-1** models:

- **Key #1**: Orchestrator (handles all user interactions and responses)
- **Key #2**: Available for background tasks/validation
- **Key #3**: Available for background tasks/validation

### Setup Steps

1. **Create `.env.local` file** in the project root:

```bash
touch .env.local
```

2. **Add your 3 OpenRouter API keys**:

```env
OPENROUTER_API_KEY1=sk-or-v1-your-first-key-here
OPENROUTER_API_KEY2=sk-or-v1-your-second-key-here
OPENROUTER_API_KEY3=sk-or-v1-your-third-key-here
```

3. **Get OpenRouter API Keys**:
   - Visit [OpenRouter.ai](https://openrouter.ai/)
   - Sign up/Login
   - Navigate to API Keys section
   - Generate 3 API keys
   - Copy and paste them into your `.env.local` file

4. **Start the development server**:

```bash
npm run dev
```

5. **Open** `http://localhost:3000` in your browser

## Architecture

- Only **OPENROUTER_API_KEY1** is used as the orchestrator that talks to users
- Keys #2 and #3 are available for future enhancements (parallel processing, validation, etc.)
- All 3 keys use the **x-ai/grok-code-fast-1** model
- API endpoint: `/app/api/chat/route.ts`
- Chat UI: `/components/ui/animated-ai-chat.tsx`
- Code Display: `/components/ui/code-canvas.tsx`
- Markdown Renderer: `/components/ui/markdown-renderer.tsx`

## Features

- ✅ **1M Token Context Window**: Full conversation history with intelligent caching
- ✅ **Code Canvas**: Beautiful syntax-highlighted code blocks with copy functionality
- ✅ **Smart Code Editing**: Grok uses diffs/patches instead of rewriting complete files
- ✅ **Diff Viewer**: Visual diff blocks showing only changes (green for additions, red for removals)
- ✅ **Structured Output**: Markdown rendering with proper formatting
- ✅ **Context Management**: Server-side conversation caching for continuity
- ✅ **Animated UI**: Smooth Framer Motion animations throughout
- ✅ **Auto-resizing Textarea**: Expands with content up to max height
- ✅ **Real-time Chat**: Fast responses with grok-code-fast-1
- ✅ **Command Palette**: Quick actions with `/` prefix
- ✅ **Loading States**: Beautiful "Thinking..." indicator
- ✅ **Error Handling**: Graceful fallbacks for API errors

## Code Display

All code generated by the AI is displayed in a professional canvas with:
- macOS-style window controls
- Syntax highlighting (150+ languages supported)
- **Collapsible code blocks** - Auto-collapse for 10+ lines
- **Expand/Collapse buttons** - Click to toggle
- **Preview mode** - Shows first 5 lines when collapsed
- Line numbers for readability
- One-click copy with visual feedback
- Smooth animations for better UX
- Responsive overflow handling

See `CODE_CANVAS_FEATURES.md` for detailed documentation

## Troubleshooting

If you get API errors:
1. Check that your API keys are correct in `.env.local`
2. Ensure you have credits on OpenRouter
3. Restart the dev server after adding `.env.local`
4. Check the browser console for detailed error messages
